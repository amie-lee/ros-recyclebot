drive:
  base_linear: 0.20
  clamp: 1.0

turning:
  turn_speed: 0.6
  rotate_secs: 1.2

line_end:
  lost_count_thresh: 10
  rate_hz: 50

voice:
  cooldown_sec: 2.0
  phrase_time_limit_sec: 4
  credentials_json_path: "/home/ssm/ssm-stt-xxxx.json"

camera:
  image_topic: "/usb_cam/image_raw"
  debug_image_topic: "/line_debug"
  frame_id: "camera"

  # ROI
  roi_y_from_bottom: 30
  roi_height: 150
  resize_width: 320

  # --- Black-hat 기반 전처리 ---
  clahe: true
  blur_kernel: 5

  use_blackhat: true
  blackhat_kernel: 15     # 11/13/15에서 현장 맞춤
  bh_threshold: 25        # 20~40 사이 튜닝

  # 조명 보정(이번 파이프라인에서는 0 권장)
  illum_sigma: 0
  illum_gain: 0.0
  illum_bias: 0

  # (비활성) 다른 이진화 옵션들
  use_adaptive: false
  use_otsu: false
  binary_threshold: 120
  invert: false           # black-hat 사용 시 false 권장

  # 채움/노이즈 제거
  close_kernel: 9
  fill_holes: true
  open_kernel: 5
  noise_min_area: 400

  # 스캔
  scan_rows: 6
  min_pixels: 18

  # 블롭 필터(선택)
  use_blob_filter: true
  blob_min_area: 800
  blob_max_width: 0.55

  # 제어
  kp: -0.012
  kd: 0.12
  ka: -0.20
  max_steer: 0.45
  steer_slew: 2.5
  ema_err_alpha: 0.25
  deadband_px: 6
  speed_min: 0.08
  speed_gain: 0.8

